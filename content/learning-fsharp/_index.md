---
layout: page
title: "Learning F#"
description: "Functional programming languages need a different approach"
nav: learning-fsharp
hasComments: 1
date: 2015-01-01
---

関数型言語は標準的な命令型言語とは大きく異なり、最初にコツをつかむのはかなり難しいものです。 このページでは、F#を効果的に学ぶためのヒントをご紹介します。

## 初心者としてのF#学習への取り組み ##

C#やJavaなどの言語を使ったことがある人は、キーワードやライブラリに詳しくなくても、似たような言語で書かれたソースコードをかなり理解できることに気付いていると思います。これは、すべての命令型言語が同じ考え方をしており、ある言語での経験を他の言語に簡単に移すことができるからです。

もしあなたが多くの人と同じようなら、新しいプログラミング言語を学ぶときの標準的なアプローチは、すでに慣れ親しんだ概念をどうやって実装するかということでしょう。「変数の代入方法」や「ループの実行方法」など確認して、基本的なプログラミングをすぐに出来るようにするかもしれません。

F#を学ぶ際には、**古い命令型の概念を持ち込もうとしない**ようにしましょう。純粋な関数型言語には、変数もループもオブジェクトもありません。

確かに、F#はハイブリッド言語であり、これらの概念をサポートしています。しかし、初心者の気持ちで始めた方がはるかに早く学ぶことができます。

## 考え方を変える ##

関数型プログラミングは、単なるスタイルの違いではなく、プログラミングに対する完全に異なる考え方であることを理解することが重要です。これは、真のオブジェクト指向プログラミング（Smalltalkで言うところの）が、C言語のような伝統的な命令型言語とは異なる考え方であるのと同じです。

F#は非関数的なスタイルを許容しているので、すでに慣れ親しんだ習慣を維持したいと思うものです。考え方を変えずにF#を非関数的に使っても、何が足りないのか気づかないかもしれません。F#を最大限に活用し、関数型プログラミングを使いこなすためには、命令的ではなく、関数的に考えることが重要です。

F#がどのように機能するのか、特に関数や型システムに関わる中核的な概念を正確に理解するために、時間と労力をかけることが何よりも大切です。 ですから、本格的なコーディングを始める前に、["thinking functionally"](/series/thinking-functionally.html)と["understanding F# types"](/series/understanding-fsharp-types.html)を読み直し、例題で遊んで、考え方に慣れてください。関数や型がどのように機能するのかを理解していなければ、生産性を上げることは難しいでしょう。

## 推奨事項、禁止事項 ##

ここでは、関数的に考えることを促すための注意点をまとめています。最初は難しいかもしれませんが、外国語を学ぶのと同じように、現地の人と同じように話すためには、飛び込まなければなりません。

* 初心者のうちは、`mutable`キーワードを **一切** 使わないでください。ミュータブルステートを使わずに複雑な関数をコーディングすることで、関数型のパラダイムを理解することができます。
* `for`ループや`if-then-else`は使わないでください。booleansのテストやリストの再帰にはパターンマッチを使いましょう。
* 「ドット記法」は使わないでください。オブジェクトに「ドットを打つ」のではなく、すべてに関数を使うようにしましょう。つまり、`"hello".Length`ではなく、`String.length "hello"`と書きます。余計なことをしているように見えるかもしれませんが、パイプや `List.map` のような高階の関数を使うときには、このような作業方法が不可欠です。また、自分でメソッドを書くのもやめましょう。詳しくは[this post for details](/posts/type-extensions/#downsides-of-methods)をご覧ください。
* 関連して、クラスを作らないでください。タプル、レコード、ユニオンのような純粋なF#の型だけを使いましょう。
* デバッガは使わないでください。間違ったコードを見つけて修正するためにデバッガに頼っていたら、ひどいショックを受けるでしょう。F#では、コンパイラが多くの点で非常に厳しいので、おそらくそこまではできないでしょう。 もちろん、コンパイラを「デバッグ」して、その処理を段階的に進めるツールもありません。 コンパイラのエラーをデバッグするための最良のツールはあなたの頭脳であり、F#はあなたにそれを使わせるのです！

その一方で

* 「小さな型」、特にユニオン型をたくさん作りましょう。これらは軽量で簡単であり、これらを使用することでドメインモデルを文書化し、正しさを確保することができます。
* `list` と `seq` 型、およびそれらに関連するライブラリモジュールを理解してください。`List.fold`や`List.map`のような関数は非常に強力です。これらの使い方を理解すれば、一般的な高次関数を理解することができるようになります。
* コレクションモジュールを理解したら、再帰を避けるようにしましょう。再帰はエラーになりやすく、また、適切に末尾再帰的であることを確認するのは難しいでしょう。`List.fold`を使えば、そのような問題は起こりません。
* パイプ(`|>`)とコンポジション(`>>`)はできるだけ使いましょう。このスタイルは、`f(g(x))`のようなネストされた関数呼び出しよりも、はるかにイディオム的です。
* 部分適用の仕組みを理解し、ポイントフリー（暗黙の了解）スタイルに慣れるようにしましょう。
* コードの断片をテストするためにインタラクティブウィンドウを使用して、コードを段階的に開発してください。やみくもに大量のコードを作成して一度にコンパイルしようとすると、痛くてデバッグしにくいコンパイルエラーが多発することになります。

## トラブルシューティング ##

初心者が陥りやすい非常に一般的なエラーがいくつかあります。コードのコンパイルに挫折した場合は、["トラブルシューティングF#"](/troubleshooting-fsharp/)のページをお読みください。

